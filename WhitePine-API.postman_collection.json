{
  "info": {
    "name": "White Pine API",
    "description": "API specification for White Pine - a node-based content management system",
    "version": "1.0.0",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "auth": {
    "type": "noauth"
  },
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          ""
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          ""
        ]
      }
    }
  ],
  "variable": [
    {
      "key": "baseUrl",
      "value": "{{baseUrl}}",
      "type": "string"
    },
    {
      "key": "apiUrl",
      "value": "{{baseUrl}}/api",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Health & Info",
      "item": [
        {
          "name": "Health Check",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/health",
              "host": ["{{baseUrl}}"],
              "path": ["health"]
            }
          },
          "response": [
            {
              "name": "Success",
              "originalRequest": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/health",
                  "host": ["{{baseUrl}}"],
                  "path": ["health"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"status\": \"healthy\",\n  \"timestamp\": \"2024-01-01T00:00:00.000Z\",\n  \"uptime\": 3600,\n  \"environment\": \"development\"\n}"
            }
          ]
        },
        {
          "name": "API Info",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/",
              "host": ["{{baseUrl}}"],
              "path": [""]
            }
          }
        }
      ]
    },
    {
      "name": "Authentication",
      "item": [
        {
          "name": "Google OAuth Login",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/auth/google",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "google"]
            }
          }
        },
        {
          "name": "Google OAuth Callback",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/auth/google/callback",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "google", "callback"]
            }
          }
        },
        {
          "name": "Logout",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/auth/logout",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "logout"]
            }
          }
        },
        {
          "name": "Get Current User",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Cookie",
                "value": "session=your-session-cookie"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/auth/me",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "me"]
            }
          }
        }
      ]
    },
    {
      "name": "Nodes",
      "item": [
        {
          "name": "List Nodes",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{apiUrl}}/nodes?kind=post&limit=10&skip=0",
              "host": ["{{apiUrl}}"],
              "path": ["nodes"],
              "query": [
                {
                  "key": "kind",
                  "value": "post",
                  "description": "Filter by node kind: user, post, synapse"
                },
                {
                  "key": "includeDeleted",
                  "value": "false",
                  "description": "Include soft-deleted nodes"
                },
                {
                  "key": "limit",
                  "value": "10",
                  "description": "Number of results to return"
                },
                {
                  "key": "skip",
                  "value": "0",
                  "description": "Number of results to skip"
                },
                {
                  "key": "sortBy",
                  "value": "createdAt",
                  "description": "Field to sort by"
                },
                {
                  "key": "sortOrder",
                  "value": "desc",
                  "description": "Sort order: asc or desc"
                }
              ]
            }
          }
        },
        {
          "name": "Create User Node",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Cookie",
                "value": "session=your-session-cookie"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"kind\": \"user\",\n  \"email\": \"user@example.com\",\n  \"name\": \"John Doe\",\n  \"avatar\": \"https://example.com/avatar.jpg\",\n  \"bio\": \"User bio here\",\n  \"isActive\": true,\n  \"preferences\": {\n    \"theme\": \"dark\",\n    \"language\": \"en\",\n    \"notifications\": {\n      \"email\": true,\n      \"push\": false\n    }\n  }\n}"
            },
            "url": {
              "raw": "{{apiUrl}}/nodes",
              "host": ["{{apiUrl}}"],
              "path": ["nodes"]
            }
          }
        },
        {
          "name": "Create Post Node",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Cookie",
                "value": "session=your-session-cookie"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"kind\": \"post\",\n  \"content\": \"This is my post content\",\n  \"publishImmediately\": true\n}"
            },
            "url": {
              "raw": "{{apiUrl}}/nodes",
              "host": ["{{apiUrl}}"],
              "path": ["nodes"]
            }
          }
        },
        {
          "name": "Create Synapse Node",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Cookie",
                "value": "session=your-session-cookie"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"kind\": \"synapse\",\n  \"from\": \"507f1f77bcf86cd799439011\",\n  \"to\": \"507f1f77bcf86cd799439012\",\n  \"role\": \"author\",\n  \"dir\": \"out\",\n  \"order\": 1,\n  \"weight\": 1.0,\n  \"props\": {\n    \"customProperty\": \"value\"\n  }\n}"
            },
            "url": {
              "raw": "{{apiUrl}}/nodes",
              "host": ["{{apiUrl}}"],
              "path": ["nodes"]
            }
          }
        },
        {
          "name": "Get Node by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{apiUrl}}/nodes/wp_1234567890abcdef12345678",
              "host": ["{{apiUrl}}"],
              "path": ["nodes", "wp_1234567890abcdef12345678"]
            }
          }
        },
        {
          "name": "Update Node",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Cookie",
                "value": "session=your-session-cookie"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Updated Name\",\n  \"bio\": \"Updated bio\"\n}"
            },
            "url": {
              "raw": "{{apiUrl}}/nodes/wp_1234567890abcdef12345678",
              "host": ["{{apiUrl}}"],
              "path": ["nodes", "wp_1234567890abcdef12345678"]
            }
          }
        },
        {
          "name": "Delete Node",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Cookie",
                "value": "session=your-session-cookie"
              }
            ],
            "url": {
              "raw": "{{apiUrl}}/nodes/wp_1234567890abcdef12345678",
              "host": ["{{apiUrl}}"],
              "path": ["nodes", "wp_1234567890abcdef12345678"]
            }
          }
        },
        {
          "name": "Restore Node",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Cookie",
                "value": "session=your-session-cookie"
              }
            ],
            "url": {
              "raw": "{{apiUrl}}/nodes/wp_1234567890abcdef12345678/restore",
              "host": ["{{apiUrl}}"],
              "path": ["nodes", "wp_1234567890abcdef12345678", "restore"]
            }
          }
        },
        {
          "name": "Get Node Kinds",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{apiUrl}}/nodes/kinds",
              "host": ["{{apiUrl}}"],
              "path": ["nodes", "kinds"]
            }
          }
        },
        {
          "name": "Get Node Stats",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{apiUrl}}/nodes/stats",
              "host": ["{{apiUrl}}"],
              "path": ["nodes", "stats"]
            }
          }
        },
        {
          "name": "Get Isolated Posts",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{apiUrl}}/nodes/isolated-posts",
              "host": ["{{apiUrl}}"],
              "path": ["nodes", "isolated-posts"]
            }
          }
        },
        {
          "name": "Bulk Operations",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Cookie",
                "value": "session=your-session-cookie"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"operation\": \"delete\",\n  \"nodeIds\": [\n    \"wp_1234567890abcdef12345678\",\n    \"wp_1234567890abcdef12345679\"\n  ]\n}"
            },
            "url": {
              "raw": "{{apiUrl}}/nodes/bulk",
              "host": ["{{apiUrl}}"],
              "path": ["nodes", "bulk"]
            }
          }
        }
      ]
    },
    {
      "name": "Synapses",
      "item": [
        {
          "name": "List Synapses",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{apiUrl}}/nodes/synapses?role=author&dir=out",
              "host": ["{{apiUrl}}"],
              "path": ["nodes", "synapses"],
              "query": [
                {
                  "key": "from",
                  "value": "507f1f77bcf86cd799439011",
                  "description": "Filter by source node ID"
                },
                {
                  "key": "to",
                  "value": "507f1f77bcf86cd799439012",
                  "description": "Filter by target node ID"
                },
                {
                  "key": "role",
                  "value": "author",
                  "description": "Filter by synapse role"
                },
                {
                  "key": "dir",
                  "value": "out",
                  "description": "Filter by direction: out, in, undirected"
                },
                {
                  "key": "includeDeleted",
                  "value": "false",
                  "description": "Include soft-deleted synapses"
                }
              ]
            }
          }
        },
        {
          "name": "Get Synapse Stats",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{apiUrl}}/nodes/synapses/stats",
              "host": ["{{apiUrl}}"],
              "path": ["nodes", "synapses", "stats"]
            }
          }
        },
        {
          "name": "Get Node Synapses",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{apiUrl}}/nodes/synapses/node/wp_1234567890abcdef12345678",
              "host": ["{{apiUrl}}"],
              "path": ["nodes", "synapses", "node", "wp_1234567890abcdef12345678"],
              "query": [
                {
                  "key": "role",
                  "value": "author",
                  "description": "Filter by synapse role"
                },
                {
                  "key": "dir",
                  "value": "out",
                  "description": "Filter by direction"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Node Relationships",
      "item": [
        {
          "name": "Create Node with Relationship",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Cookie",
                "value": "session=your-session-cookie"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"node\": {\n    \"kind\": \"post\",\n    \"content\": \"New post content\"\n  },\n  \"synapse\": {\n    \"from\": \"wp_1234567890abcdef12345678\",\n    \"role\": \"author\",\n    \"dir\": \"out\"\n  }\n}"
            },
            "url": {
              "raw": "{{apiUrl}}/nodes/with-relationship",
              "host": ["{{apiUrl}}"],
              "path": ["nodes", "with-relationship"]
            }
          }
        },
        {
          "name": "Create Multiple Nodes with Relationships",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Cookie",
                "value": "session=your-session-cookie"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nodes\": [\n    {\n      \"kind\": \"post\",\n      \"content\": \"First post\"\n    },\n    {\n      \"kind\": \"post\",\n      \"content\": \"Second post\"\n    }\n  ],\n  \"synapses\": [\n    {\n      \"from\": \"wp_1234567890abcdef12345678\",\n      \"role\": \"author\",\n      \"dir\": \"out\"\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{apiUrl}}/nodes/with-relationships",
              "host": ["{{apiUrl}}"],
              "path": ["nodes", "with-relationships"]
            }
          }
        }
      ]
    },
    {
      "name": "Avatars",
      "item": [
        {
          "name": "Get Avatar",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{apiUrl}}/avatars/avatar_1234567890.jpg",
              "host": ["{{apiUrl}}"],
              "path": ["avatars", "avatar_1234567890.jpg"]
            }
          }
        },
        {
          "name": "Get User Avatar URL",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{apiUrl}}/avatars/user/507f1f77bcf86cd799439011",
              "host": ["{{apiUrl}}"],
              "path": ["avatars", "user", "507f1f77bcf86cd799439011"]
            }
          }
        },
        {
          "name": "Upload Custom Avatar",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Cookie",
                "value": "session=your-session-cookie"
              }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "avatar",
                  "type": "file",
                  "src": "/path/to/avatar.jpg"
                }
              ]
            },
            "url": {
              "raw": "{{apiUrl}}/avatars/upload",
              "host": ["{{apiUrl}}"],
              "path": ["avatars", "upload"]
            }
          }
        },
        {
          "name": "Update Avatar URL",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Cookie",
                "value": "session=your-session-cookie"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"avatarUrl\": \"https://example.com/new-avatar.jpg\"\n}"
            },
            "url": {
              "raw": "{{apiUrl}}/avatars/update",
              "host": ["{{apiUrl}}"],
              "path": ["avatars", "update"]
            }
          }
        },
        {
          "name": "Refresh Avatar Cache",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Cookie",
                "value": "session=your-session-cookie"
              }
            ],
            "url": {
              "raw": "{{apiUrl}}/avatars/refresh/507f1f77bcf86cd799439011",
              "host": ["{{apiUrl}}"],
              "path": ["avatars", "refresh", "507f1f77bcf86cd799439011"]
            }
          }
        },
        {
          "name": "Remove Avatar",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Cookie",
                "value": "session=your-session-cookie"
              }
            ],
            "url": {
              "raw": "{{apiUrl}}/avatars/remove",
              "host": ["{{apiUrl}}"],
              "path": ["avatars", "remove"]
            }
          }
        },
        {
          "name": "Cleanup Old Avatars",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Cookie",
                "value": "session=your-session-cookie"
              }
            ],
            "url": {
              "raw": "{{apiUrl}}/avatars/cleanup",
              "host": ["{{apiUrl}}"],
              "path": ["avatars", "cleanup"]
            }
          }
        },
        {
          "name": "Refresh All Avatars",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Cookie",
                "value": "session=your-session-cookie"
              }
            ],
            "url": {
              "raw": "{{apiUrl}}/avatars/refresh-all",
              "host": ["{{apiUrl}}"],
              "path": ["avatars", "refresh-all"]
            }
          }
        }
      ]
    },
    {
      "name": "Test Routes",
      "item": [
        {
          "name": "Protected Route",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Cookie",
                "value": "session=your-session-cookie"
              }
            ],
            "url": {
              "raw": "{{apiUrl}}/protected",
              "host": ["{{apiUrl}}"],
              "path": ["protected"]
            }
          }
        },
        {
          "name": "Public Route",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{apiUrl}}/public",
              "host": ["{{apiUrl}}"],
              "path": ["public"]
            }
          }
        },
        {
          "name": "Create Test Node (Dev Only)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"kind\": \"post\",\n  \"content\": \"Test post created via API\"\n}"
            },
            "url": {
              "raw": "{{apiUrl}}/test/create-node",
              "host": ["{{apiUrl}}"],
              "path": ["test", "create-node"]
            }
          }
        }
      ]
    }
  ]
}
